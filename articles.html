<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nos Articles - MedShop</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="logo">Votre bien-être</div>
    <nav>
        <ul>
            <li><a href="index.html">Accueil</a></li>
            <li><a href="articles.html" class="active">Nos Articles</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>
</header>

<section class="products">
    <h2>Nos Articles</h2>
    <div class="product-list" id="productList">
        <div class="product" data-name="masque chirurgical">
             <a href="articles.html" target='_blank'><img src="https://i.postimg.cc/MGq3rfVf/Savon-grand.png" border='0' alt='Savon-moyen'/></a>
            <p data-name="Savon" data-price="10">Savon 10 €</p>
            <button class="add-to-cart">Ajouter au panier</button>
        </div>
        <div class="product" data-name="gants en nitrile">
           <a href="articles.html" target='_blank'><img src="https://i.postimg.cc/jjc3Vq4g/Poudre-m-dicale.png" border='0' alt='Poudre-m-dicale'/></a>
            <p data-name="Poudre médicale" data-price="15">Poudre médicale 15 €</p>
            <button class="add-to-cart">Ajouter au panier</button>
        </div>
        <div class="product" data-name="tensiomètre électronique">
             <a href="articles.html" target='_blank'><img src="https://i.postimg.cc/Z5kMpMqc/Pommade-grande.png" border='0' alt='Pomade-grand'/></a>
            <p data-name="Pomade" data-price="45">Pomade 45 €</p>
            <button class="add-to-cart">Ajouter au panier</button>
        </div>
        <div class="product" data-name="gel hydroalcoolique">
             <a href="articles.html" target='_blank'><img src="https://i.postimg.cc/13pYHrnZ/Pommade-petite.png" border='0' alt='Pomade-peuti'/></a>
            <p data-name="Pomade petite" data-price="5">Pomade peuti 5 €</p>
            <button class="add-to-cart">Ajouter au panier</button>
        </div>
         <div class="product" data-name="gel hydroalcoolique">
             <a href="articles.html" target='_blank'><img src='https://i.postimg.cc/5NxTSqXz/Gemini-Generated-Image-a7zq2pa7zq2pa7zq.png' border='0' alt='Savon-grand'/></a>
            <p data-name="Pomade petite" data-price="5">Savon-grand 5 €</p>
            <button class="add-to-cart">Ajouter au panier</button>
        </div>
    </div>
</section>

<button class="cart-button" id="cart-button">
    🛒 <span id="cart-count">0</span>
</button>

<div id="cart-modal" class="cart-modal">
    <div class="cart-modal-content">
        <span class="close-button">&times;</span>
        <h2>Votre Panier</h2>
        <ul id="cart-items"></ul>
        <div id="cart-modal-footer">
            <div id="cart-total"></div>
            <button id="checkout-button">Procéder à l'achat</button>
        </div>
    </div>
</div>

<div id="cart-notification" class="cart-notification">
    <img id="notification-img" src="" alt="Produit ajouté">
    <span id="notification-message" class="message"></span>
</div>

<footer>
    <p>&copy; 2025 MedShop | <a href="#">Mentions légales</a> | <a href="#">Politique de confidentialité</a> | <a href="contact.html">Contact</a></p>
</footer>

<script>
    // Logique du panier d'achat et de la commande
    let cart = [];
    const whatsappNumber = '22870445866';

    const cartCountElement = document.getElementById('cart-count');
    const cartButton = document.getElementById('cart-button');
    const cartModal = document.getElementById('cart-modal');
    const closeButton = document.querySelector('.close-button');
    const cartItemsList = document.getElementById('cart-items');
    const cartTotalElement = document.getElementById('cart-total');
    const checkoutButton = document.getElementById('checkout-button');
    const notification = document.getElementById('cart-notification');
    const notificationImg = document.getElementById('notification-img');
    const notificationMessage = document.getElementById('notification-message');

    function updateCartDisplay() {
        cartCountElement.textContent = cart.length;
        cartItemsList.innerHTML = '';
        let total = 0;
        cart.forEach((item, index) => {
            const li = document.createElement('li');
            li.classList.add('cart-item');
            
            li.innerHTML = `
                <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                <div class="cart-item-details">
                    <h4>${item.name}</h4>
                </div>
                <span class="cart-item-price">${item.price} €</span>
                <button class="remove-item" data-index="${index}">&times;</button>
            `;
            cartItemsList.appendChild(li);
            total += item.price;
        });
        cartTotalElement.textContent = `Total: ${total} €`;
    }

    function showNotification(productName, productImage) {
        notificationImg.src = productImage;
        notificationMessage.textContent = `Le produit "${productName}" a été ajouté au panier !`;
        notification.classList.add('visible');
        setTimeout(() => {
            notification.classList.remove('visible');
        }, 3000);
    }

    function addToCart(event) {
        const productElement = event.target.closest('.product');
        const productName = productElement.querySelector('p').getAttribute('data-name');
        const productPrice = parseFloat(productElement.querySelector('p').getAttribute('data-price'));
        const productImage = productElement.querySelector('img').src;

        const product = {
            name: productName,
            price: productPrice,
            image: productImage
        };

        cart.push(product);
        updateCartDisplay();
        showNotification(productName, productImage);
    }

    function removeFromCart(index) {
        cart.splice(index, 1);
        updateCartDisplay();
    }

    function checkout() {
        if (cart.length === 0) {
            alert("Votre panier est vide. Ajoutez des produits avant de passer commande.");
            return;
        }

        let orderMessage = "Salut ! 👋 J'aimerais passer la commande suivante :\n\n";
        let total = 0;

        cart.forEach(item => {
            orderMessage += `🛒 ${item.name} - ${item.price} €\n`;
            total += item.price;
        });

        orderMessage += `\n💰 Total : ${total} €`;
        orderMessage += `\n\nMerci de me donner les détails de la livraison et du paiement ! 🙏`;

        const encodedMessage = encodeURIComponent(orderMessage);
        const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;

        window.open(whatsappURL, '_blank');

        cart = [];
        updateCartDisplay();
        cartModal.style.display = 'none';
    }

    // Ajouter des écouteurs d'événements
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.addEventListener('click', addToCart);
    });

    cartButton.addEventListener('click', () => {
        cartModal.style.display = 'block';
    });

    closeButton.addEventListener('click', () => {
        cartModal.style.display = 'none';
    });

    checkoutButton.addEventListener('click', checkout);

    cartItemsList.addEventListener('click', (event) => {
        if (event.target.classList.contains('remove-item')) {
            const index = event.target.dataset.index;
            removeFromCart(index);
        }
    });

    window.addEventListener('click', (event) => {
        if (event.target === cartModal) {
            cartModal.style.display = 'none';
        }
    });
</script>

</body>
</html>

